FROM rockylinux:9.3


ADD ./docker/etc/pip.conf /etc/

ADD requirements.txt /tmp/
ADD / /tmp/wrk/

RUN dnf update -y && \
    dnf install -y gcc \
                python3.11 \
                pip 
                
RUN dnf install -y traceroute
RUN dnf install -y rsync
RUN dnf -y install --nogpgcheck https://mirrors.rpmfusion.org/free/el/rpmfusion-free-release-9.noarch.rpm && \
dnf  config-manager --set-enabled crb && \
dnf -y install ffmpeg

RUN echo "alias ll='ls -l'" >> ~/.bashrc
RUN pip install s5cmd
RUN pip install --extra-index-url https://pypi.python.org/simple/ -r /tmp/requirements.txt

COPY ./docker/etc/start.sh /usr/local/bin/start.sh
RUN chmod +x /usr/local/bin/start.sh

ENTRYPOINT [ "/usr/local/bin/start.sh" ]